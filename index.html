<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Bot Finder - Optimizaci√≥n de Patrones</title>
    <style>
        :root { --bg: #0d1117; --card: #161b22; --accent: #238636; --text: #c9d1d9; --gold: #d29922; --win: #2ea043; --loss: #f85149; --info: #58a6ff; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
        .container { max-width: 1200px; margin: auto; }
        .grid { display: grid; grid-template-columns: 1fr 400px; gap: 20px; }
        textarea { width: 100%; height: 200px; background: #010409; color: #7ee787; border: 1px solid #30363d; padding: 15px; border-radius: 6px; box-sizing: border-box; font-family: monospace; }
        .panel { background: var(--card); border: 1px solid #30363d; border-radius: 6px; padding: 20px; margin-bottom: 20px; }
        button { background: var(--info); color: white; border: none; padding: 15px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; font-size: 1.1em; }
        button:hover { filter: brightness(1.2); }
        .bot-config { background: #010409; border: 2px solid var(--win); padding: 15px; border-radius: 6px; color: #7ee787; font-family: monospace; }
        .match-entry { border-bottom: 1px solid #30363d; padding: 8px 0; display: flex; justify-content: space-between; font-size: 0.85em; }
        .status-win { color: var(--win); font-weight: bold; }
        .status-loss { color: var(--loss); font-weight: bold; }
        .loading { display: none; text-align: center; color: var(--gold); font-weight: bold; margin: 10px 0; }
        .summary-card { background: #21262d; padding: 15px; border-radius: 6px; margin-top: 10px; border-left: 4px solid var(--info); }
        .log-search { font-size: 0.8em; color: #8b949e; height: 100px; overflow-y: auto; background: #010409; padding: 10px; border-radius: 5px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header" style="text-align:center;">
        <h2>üß† IA Search: Buscador de Bots Rentables</h2>
        <p>Buscando el patr√≥n que rompa el ROI negativo a cuota 1.60</p>
    </div>

    <div class="grid">
        <div class="left-col">
            <div class="panel">
                <h3>1. Inserci√≥n de Datos Masivos</h3>
                <textarea id="dataInput" placeholder="Pega aqu√≠ los datos hist√≥ricos de tus an√°lisis..."></textarea>
                <button onclick="startDeepSearch()">Ejecutar B√∫squeda de Patr√≥n Rentable</button>
                <div id="loadingText" class="loading">üîç Analizando miles de combinaciones...</div>
                <div id="searchLog" class="log-search">Esperando inicio...</div>
            </div>

            <div class="panel">
                <h3>2. Partidos que cumplen el patr√≥n ganador</h3>
                <div id="matchList"></div>
            </div>
        </div>

        <div class="right-col">
            <div id="resultPanel" style="display:none;">
                <div class="panel" style="border-color: var(--win);">
                    <h3>‚úÖ Bot Rentable Encontrado</h3>
                    <div id="botConfig" class="bot-config"></div>
                </div>

                <div class="panel">
                    <h3>üìä Rendimiento del Bot</h3>
                    <div id="roiStats"></div>
                </div>
            </div>
            
            <div id="noResultPanel" class="panel" style="display:none; border-color: var(--loss);">
                <h3>‚ö†Ô∏è Sin Rentabilidad</h3>
                <p>Incluso con filtros m√°ximos, estos datos no dan beneficio a cuota 1.60. Se necesita una muestra diferente o m√°s volumen de datos.</p>
            </div>
        </div>
    </div>
</div>

<script>
function startDeepSearch() {
    const input = document.getElementById('dataInput').value;
    const lines = input.split('\n').filter(l => l.trim() !== "" && !l.toLowerCase().includes('match'));
    const log = document.getElementById('searchLog');
    const loading = document.getElementById('loadingText');
    
    if (lines.length < 5) {
        alert("Pega m√°s datos para poder encontrar un patr√≥n s√≥lido.");
        return;
    }

    loading.style.display = "block";
    log.innerHTML = "Iniciando Deep Search...<br>";
    
    // Configuraciones a probar autom√°ticamente
    const apTests = [1.0, 1.2, 1.4, 1.6, 1.8, 2.0];
    const shotTests = [0, 1, 2, 3];
    const cornerTests = [0, 1, 2, 3];
    
    let bestBot = null;
    let maxROI = -100;

    // SIMULACI√ìN DE PROCESAMIENTO
    setTimeout(() => {
        apTests.forEach(apMin => {
            shotTests.forEach(shots => {
                cornerTests.forEach(corners => {
                    let total = 0;
                    let wins = 0;
                    let selectedMatches = [];

                    lines.forEach(line => {
                        const cols = line.split('\t');
                        const minute = parseInt(cols[7]) || 1;
                        const ap = (parseInt(cols[11]) || 0) + (parseInt(cols[12]) || 0);
                        const shOn = (parseInt(cols[15]) || 0) + (parseInt(cols[16]) || 0);
                        const corn = (parseInt(cols[27]) || 0) + (parseInt(cols[28]) || 0);
                        const resultHT = cols[41].trim();
                        
                        const apM = ap / minute;
                        const isWin = (resultHT !== "0-0" && resultHT !== "");

                        if (apM >= apMin && shOn >= shots && corn >= corners) {
                            total++;
                            if (isWin) wins++;
                            selectedMatches.push({name: cols[6], res: resultHT, win: isWin, apm: apM, sh: shOn});
                        }
                    });

                    if (total >= 5) { // Muestra m√≠nima para considerar patr√≥n
                        const roi = ((wins * 1.60 - total) / total * 100);
                        log.innerHTML += `Probando: AP > ${apMin}, Sh > ${shots}... ROI: ${roi.toFixed(1)}%<br>`;
                        log.scrollTop = log.scrollHeight;

                        if (roi > maxROI) {
                            maxROI = roi;
                            bestBot = { apMin, shots, corners, roi, wins, total, matches: selectedMatches };
                        }
                    }
                });
            });
        });

        loading.style.display = "none";
        displayBestBot(bestBot);
    }, 1000);
}

function displayBestBot(bot) {
    const resPanel = document.getElementById('resultPanel');
    const noRes = document.getElementById('noResultPanel');
    const botConfig = document.getElementById('botConfig');
    const roiStats = document.getElementById('roiStats');
    const matchList = document.getElementById('matchList');

    if (bot && bot.roi > 0) {
        resPanel.style.display = "block";
        noRes.style.display = "none";
        
        botConfig.innerHTML = `
            ESTRATEGIA GANADORA:<br>
            --------------------<br>
            Ataques Pel/Min: > ${bot.apMin.toFixed(2)}<br>
            Tiros a Puerta: >= ${bot.shots}<br>
            C√≥rners Totales: >= ${bot.corners}<br>
            Entrada: Cuota 1.60
        `;

        roiStats.innerHTML = `
            <div class="summary-card">
                <span style="font-size: 1.5em; font-weight: bold; color: var(--win);">ROI: ${bot.roi.toFixed(1)}%</span><br>
                <span>Strike Rate: ${((bot.wins/bot.total)*100).toFixed(1)}%</span><br>
                <span>Eficiencia: ${bot.wins} de ${bot.total} partidos</span>
            </div>
        `;

        matchList.innerHTML = bot.matches.map(m => `
            <div class="match-entry">
                <span>${m.name} (APm: ${m.apm.toFixed(1)})</span>
                <span class="${m.win ? 'status-win' : 'status-loss'}">${m.res}</span>
            </div>
        `).join('');

    } else {
        resPanel.style.display = "none";
        noRes.style.display = "block";
    }
}
</script>

</body>
</html>
