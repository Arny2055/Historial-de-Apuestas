<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Builder Pro - Patrones Rentables</title>
    <style>
        :root { --bg: #090c10; --card: #161b22; --accent: #238636; --text: #c9d1d9; --gold: #d29922; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
        .container { max-width: 1200px; margin: auto; }
        .grid { display: grid; grid-template-columns: 1fr 350px; gap: 20px; }
        textarea { width: 100%; height: 250px; background: #0d1117; color: #7ee787; border: 1px solid #30363d; padding: 15px; border-radius: 6px; box-sizing: border-box; font-family: monospace; }
        .panel { background: var(--card); border: 1px solid #30363d; border-radius: 6px; padding: 20px; margin-bottom: 20px; }
        button { background: var(--accent); color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; }
        button:hover { background: #2ea043; }
        .bot-config { background: #0d1117; border: 1px dashed var(--gold); padding: 15px; border-radius: 6px; color: var(--gold); font-family: monospace; font-size: 0.9em; }
        .match-entry { border-bottom: 1px solid #30363d; padding: 10px 0; display: flex; justify-content: space-between; align-items: center; }
        .status-win { color: #3fb950; font-weight: bold; }
        .status-info { color: #58a6ff; }
        h2, h3 { color: white; margin-top: 0; }
        .metric { font-size: 0.8em; background: #21262d; padding: 2px 6px; border-radius: 4px; margin-right: 5px; }
    </style>
</head>
<body>

<div class="container">
    <div class="grid">
        <div class="left-col">
            <div class="panel">
                <h3>1. Carga de Datos Live</h3>
                <textarea id="dataInput" placeholder="Pega aquÃ­ las filas de tu reporte..."></textarea>
                <button onclick="processData()" style="margin-top: 15px;">Analizar Datos y Sugerir Bot</button>
            </div>

            <div class="panel" id="analysisResults">
                <h3>2. Partidos Detectados</h3>
                <div id="matchList">Pega datos para comenzar...</div>
            </div>
        </div>

        <div class="right-col">
            <div class="panel">
                <h3>ðŸ¤– ConfiguraciÃ³n del Bot</h3>
                <p style="font-size: 0.85em;">Basado en patrones de efectividad observados:</p>
                <div id="botRecommendation" class="bot-config">
                    Esperando datos...
                </div>
                <div id="botStats" style="margin-top:15px; font-size: 0.85em;"></div>
            </div>

            <div class="panel">
                <h3>ðŸ“Š Filtro de Rentabilidad</h3>
                <ul id="keyPatterns" style="font-size: 0.85em; padding-left: 20px;">
                    <li>MÃ­nimo AP/Min: 1.2</li>
                    <li>Tiros totales: +3</li>
                    <li>Cuota Objetivo: 1.60</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
function processData() {
    const input = document.getElementById('dataInput').value;
    const lines = input.split('\n');
    const matchList = document.getElementById('matchList');
    const botRec = document.getElementById('botRecommendation');
    
    let processedMatches = [];
    let winners = 0;
    let totalPotential = 0;

    matchList.innerHTML = "";

    lines.forEach((line) => {
        if (line.toLowerCase().includes('match') || line.trim() === "") return;
        const cols = line.split('\t');
        if (cols.length < 15) return;

        const data = {
            match: cols[6],
            min: parseInt(cols[7]),
            apH: parseInt(cols[11]) || 0,
            apA: parseInt(cols[12]) || 0,
            shOnH: parseInt(cols[15]) || 0,
            shOnA: parseInt(cols[16]) || 0,
            resHT: cols[41],
            resFT: cols[42]
        };

        // LÃ³gica de detecciÃ³n: Â¿Hubo gol despuÃ©s de la notificaciÃ³n?
        // Simplificado: Si el resultado final es distinto al de la notificaciÃ³n (0-0)
        const totalGoals = data.resFT.split('-').reduce((a, b) => parseInt(a) + parseInt(b), 0);
        const isWin = totalGoals > 0; 
        
        const apMin = (data.apH + data.apA) / (data.min || 1);
        const shots = data.shOnH + data.shOnA;

        if (apMin >= 1.0) {
            totalPotential++;
            if (isWin) winners++;

            processedMatches.push(data);
            const div = document.createElement('div');
            div.className = 'match-entry';
            div.innerHTML = `
                <div>
                    <small>${data.match}</small><br>
                    <span class="metric">AP/m: ${apMin.toFixed(1)}</span>
                    <span class="metric">Shots: ${shots}</span>
                </div>
                <span class="${isWin ? 'status-win' : ''}">${isWin ? 'GOL âœ“' : '0-0'}</span>
            `;
            matchList.appendChild(div);
        }
    });

    // Sugerencia del Bot basada en la muestra
    const rate = ((winners / totalPotential) * 100).toFixed(1);
    botRec.innerHTML = `
// ESTRATEGIA SUGERIDA: "OVER 0.5 LIVE"<br>
// RENTABILIDAD DETECTADA: ${rate}%<br><br>
CONDICIONES:<br>
- Minuto: 15 a 30<br>
- Marcador: 0 - 0<br>
- Ataques Peligrosos: > ${ (winners > 0) ? '1.2' : '1.5' } por min<br>
- Tiros a Puerta Totales: >= 1<br>
- Cuota: Entrar en 1.60<br>
- Mercado: Over 0.5 Goles Partido
    `;

    document.getElementById('botStats').innerHTML = `
        <strong>Muestra analizada:</strong> ${totalPotential} partidos<br>
        <strong>Aciertos potenciales:</strong> ${winners}<br>
        <strong>ROI Estimado:</strong> ${(rate * 1.6 - 100).toFixed(1)}%
    `;
}
</script>
</body>
</html>
